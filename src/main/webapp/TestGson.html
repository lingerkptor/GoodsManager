<!DOCTYPE html>
<html>
<head>
<meta charset="BIG5">
<title>Test Gson</title>
<script type="text/javascript">
	window.onload = function() {
		getMessage();
	

	};
	function getMessage() {
		var obj3 = {
			"category" : [ "info", "warn", "err" ]
		};
		var request = new XMLHttpRequest();
		request.onreadystatechange = function() {
			if (request.readyState === XMLHttpRequest.DONE) {
				if (request.status === 200) {
					console.log(request.responseText);
					//alert(request3.responseText);
					let responce = JSON.parse(request.responseText);
					if (typeof (responce.messageList) != 'undefined') {
						responce.messageList.forEach(function(item) {
							let msgEle = document.getElementById('message');
							msgEle.value += item.dateTime +'  ' + item.context + '\n'
						});
					}
					getMessage();
				} else {
					alert('There was a problem with the request.');
				}
			}
		};
		request.open('Post', "/GoodsManager/api/getMessages");
		request.setRequestHeader('Content-Type', 'application/json');
		request.send(JSON.stringify(obj3));

	}
</script>
</head>
<body>
	<textarea id="message"></textarea>
	<a id="test"></a>
	<a id="test2"></a>
</body>
</html>